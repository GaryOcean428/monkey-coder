{
  "build": {
    "steps": [
      {
        "id": "web",
        "name": "Build Web App",
        "base": "node:20",
        "run": [
          "cd packages/web",
          "yarn install",
          "yarn build"
        ],
        "output": [
          "packages/web/out"
        ]
      },
      {
        "id": "python",
        "name": "Install Python Dependencies",
        "base": "python:3.11",
        "run": [
          "pip install --upgrade pip",
          "pip install -r requirements.txt"
        ],
        "output": [
          "."
        ]
      }
    ]
  },
  "deploy": {
    "base": "python:3.11",
    "copy": [
      {
        "from": "web",
        "source": "packages/web/out",
        "dest": "packages/web/out"
      },
      {
        "from": "python",
        "source": ".",
        "dest": "."
      }
    ],
    "env": {},
    "start": "cd packages/core && python -m uvicorn monkey_coder.app.main:app --host 0.0.0.0 --port ${PORT:-8000}"
  }
}