# Monkey Coder Environment Configuration
# Copy this file to .env and fill in your API keys

# Core Application
PORT=8000
HOST=0.0.0.0

# AI Provider API Keys
OPENAI_API_KEY=sk-your-openai-api-key-here
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
GOOGLE_API_KEY=your-google-api-key-here

# Groq API (for Qwen and Kimi models)
GROQ_API_KEY=gsk_your-groq-key-here

# Moonshot API (for Kimi K2)
MOONSHOT_API_KEY=sk_your-moonshot-key-here

# Alibaba Cloud (for Qwen models)
ALIBABA_CLOUD_ACCESS_KEY_ID=your-alibaba-access-key
ALIBABA_CLOUD_ACCESS_KEY_SECRET=your-alibaba-secret-key
ALIBABA_CLOUD_REGION=us-west-1

# Sandbox Service Configuration
SANDBOX_TOKEN_SECRET=your-secure-random-secret-here-change-me
# Optional: If running sandbox as separate service
SANDBOX_SERVICE_URL=http://localhost:8001

# Sandbox CORS (for Railway allow your public domain)
# Comma-separated exact origins
SANDBOX_ALLOW_ORIGINS=http://localhost:3000
# Regex for wildcard origins (default allows any *.railway.app)
# Example to allow custom domain: ^https?://(coder\.fastmonkey\.au|.*\.railway\.app)$
SANDBOX_ALLOW_ORIGIN_REGEX=^https?://([a-z0-9-]+\.)*railway\.app$
SANDBOX_MODE=1

# E2B Sandbox Integration (Optional)
E2B_API_KEY=your-e2b-api-key-here

# BrowserBase Integration (Optional)
BROWSERBASE_API_KEY=your-browserbase-api-key-here
BROWSERBASE_PROJECT_ID=your-browserbase-project-id-here

# Sandbox Resource Limits
SANDBOX_MAX_MEMORY_MB=512
SANDBOX_MAX_CPU_PERCENT=50.0
SANDBOX_MAX_DISK_MB=1024
SANDBOX_MAX_NETWORK_MBPS=10.0

# Database Configuration (Railway Production)
DATABASE_URL=
REDIS_URL=
RAILWAY_TOKEN=

# Database Configuration (for local development)
# DATABASE_URL=postgresql://user:password@localhost:5432/monkey_coder
# REDIS_URL=redis://localhost:6379

# JWT Authentication Configuration
# CRITICAL: Generate secure random values with: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=your-jwt-secret-key-here-CHANGE-THIS-TO-64-CHAR-RANDOM-STRING
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# NextAuth Configuration (required for web frontend)
# CRITICAL: Generate secure random value with: openssl rand -base64 32
NEXTAUTH_SECRET=your-nextauth-secret-CHANGE-THIS-TO-32-CHAR-RANDOM-STRING
NEXTAUTH_URL=https://your-domain.railway.app

# Multi-Factor Authentication (MFA) Configuration
MFA_ENABLED=true
MFA_ISSUER=Monkey Coder
MFA_SECRET_LENGTH=32

# Monitoring and Logging (Optional)
LOG_LEVEL=INFO
ENABLE_METRICS=true
METRICS_PORT=9090

# Context Management
# Enable in-memory or advanced context manager (simple|advanced)
ENABLE_CONTEXT_MANAGER=true
CONTEXT_MODE=simple
# Future feature flags (placeholders)
ENABLE_MODEL_SELECTOR=false
ENABLE_RESULT_CACHE=false

# Sentry Error Tracking (Optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/your-project-id

# Development/Production Environment
ENVIRONMENT=development
DEBUG=false

# CORS Configuration (for Railway production deployment)
# Use Railway public domain for production CORS origins
CORS_ORIGINS=https://monkey-coder.up.railway.app,https://coder.fastmonkey.au
TRUSTED_HOSTS=monkey-coder.up.railway.app,coder.fastmonkey.au,*.railway.app,*.railway.internal

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_HTTPS_REDIRECT=false

# Session Configuration
SESSION_TIMEOUT_MINUTES=60
MAX_CONCURRENT_SESSIONS=10

# Docker Configuration (for docker-compose)
COMPOSE_PROJECT_NAME=monkey-coder

# Networking (Railway deployment)
# Railway automatically provides RAILWAY_PUBLIC_DOMAIN - these are examples
RAILWAY_STATIC_URL=monkey-coder.up.railway.app
RAILWAY_PUBLIC_DOMAIN=monkey-coder.up.railway.app

# Health Check Configuration
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=300

# Publishing Tokens (for CI/CD only - keep these secure!)
NPM_AUTH_TOKEN=npm_your-npm-token-here
# PYPI_TOKEN=pypi-your-pypi-token-here
