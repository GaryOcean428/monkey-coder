# ═══════════════════════════════════════════════════════════════════════════
# MONKEY CODER - RAILWAY DEPLOYMENT ENVIRONMENT TEMPLATE
# ═══════════════════════════════════════════════════════════════════════════
#
# DEPLOYMENT INSTRUCTIONS:
# 1. Copy this template and replace placeholder values with actual keys
# 2. Upload to Railway: Settings → Environment Variables → Bulk Import
# 3. NEVER commit files with real API keys to Git
# 4. Verify deployment: curl https://your-app.railway.app/health
#
# ═══════════════════════════════════════════════════════════════════════════

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 🚨 CRITICAL - API KEYS (Required for deployment)                           ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# AI Provider API Keys
OPENAI_API_KEY=REPLACE_WITH_YOUR_OPENAI_API_KEY
ANTHROPIC_API_KEY=REPLACE_WITH_YOUR_ANTHROPIC_API_KEY
GOOGLE_API_KEY=REPLACE_WITH_YOUR_GOOGLE_API_KEY
GROQ_API_KEY=REPLACE_WITH_YOUR_GROQ_API_KEY
PERPLEXITY_API_KEY=REPLACE_WITH_YOUR_PERPLEXITY_API_KEY
XAI_API_KEY=REPLACE_WITH_YOUR_XAI_API_KEY
GROK_API_KEY=REPLACE_WITH_YOUR_GROK_API_KEY
QWEN_API_KEY=REPLACE_WITH_YOUR_QWEN_API_KEY
MOONSHOT_API_KEY=REPLACE_WITH_YOUR_MOONSHOT_API_KEY
MONKEY_CODER_API_KEY=REPLACE_WITH_YOUR_MONKEY_CODER_API_KEY

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 🔐 SECURITY & AUTHENTICATION                                               ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# JWT Configuration (Generate: python -c "import secrets; print(secrets.token_urlsafe(64))")
JWT_SECRET_KEY=REPLACE_WITH_GENERATED_JWT_SECRET_MIN_64_CHARS
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# NextAuth Configuration (Frontend)
NEXTAUTH_SECRET=REPLACE_WITH_GENERATED_NEXTAUTH_SECRET
NEXTAUTH_URL=https://coder.fastmonkey.au

# CORS & Security
CORS_ORIGINS=https://coder.fastmonkey.au,https://${{RAILWAY_PUBLIC_DOMAIN}}
TRUSTED_HOSTS=coder.fastmonkey.au,${{RAILWAY_PUBLIC_DOMAIN}},*.railway.internal
ALLOWED_ORIGINS=https://coder.fastmonkey.au,https://${{RAILWAY_PUBLIC_DOMAIN}}
ENABLE_SECURITY_HEADERS=true
ENABLE_HTTPS_REDIRECT=true

# MFA Configuration
MFA_ENABLED=true
MFA_ISSUER=Monkey Coder
MFA_SECRET_LENGTH=32

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ ⚙️ SYSTEM CONFIGURATION                                                    ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# Railway Auto-Provided Variables (DO NOT SET MANUALLY)
# PORT=8000                             # ❌ Railway provides this
# HOST=0.0.0.0                         # ❌ Railway provides this
# RAILWAY_ENVIRONMENT=production        # ❌ Railway provides this
# RAILWAY_PUBLIC_DOMAIN=xxx.railway.app # ❌ Railway provides this
# DATABASE_URL=postgresql://...         # ❌ Auto-set when PostgreSQL connected
# REDIS_URL=redis://...                # ❌ Auto-set when Redis connected

# Application Configuration
NODE_ENV=production
PYTHON_ENV=production
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
ENVIRONMENT=production
DEBUG=false

# Frontend Configuration
SERVE_FRONTEND=true
NEXT_OUTPUT_EXPORT=true
NEXT_PUBLIC_API_URL=https://coder.fastmonkey.au
NEXT_PUBLIC_APP_URL=https://coder.fastmonkey.au
NEXT_TELEMETRY_DISABLED=1
ENABLE_SERVE_FRONTEND=true

# Application URLs
MONKEY_CODER_BASE_URL=https://coder.fastmonkey.au
MONKEY_CODER_WEB_URL=https://coder.fastmonkey.au

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 📊 MONITORING & PERFORMANCE                                                ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# Logging Configuration
LOG_LEVEL=INFO
JSON_LOGS=true
PERFORMANCE_LOGS=true
ENABLE_METRICS=true
METRICS_PORT=9090

# Health Check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=300

# Database Connection Pooling
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30

# Performance Features
ENABLE_PRICING_MIDDLEWARE=true
ENABLE_CONTEXT_MANAGER=true
CONTEXT_MODE=simple

# Rate Limiting
RATE_LIMIT_PER_MINUTE=50
RATE_LIMIT_BURST=10

# Session Configuration
SESSION_TIMEOUT_MINUTES=30
MAX_CONCURRENT_SESSIONS=5

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 💳 PAYMENTS & BILLING (Optional)                                           ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

STRIPE_PUBLIC_KEY=pk_live_REPLACE_WITH_YOUR_STRIPE_PUBLIC_KEY
STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_STRIPE_WEBHOOK_SECRET
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_YOUR_STRIPE_PUBLIC_KEY

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 🔧 OPTIONAL INTEGRATIONS                                                   ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# Sandbox Service (Optional)
SANDBOX_API_URL=http://localhost:8001
SANDBOX_TOKEN_SECRET=REPLACE_WITH_GENERATED_SANDBOX_SECRET
SANDBOX_MAX_MEMORY_MB=1024
SANDBOX_MAX_CPU_PERCENT=50.0
SANDBOX_MAX_DISK_MB=1024
SANDBOX_MAX_NETWORK_MBPS=10.0

# E2B Integration (Optional)
E2B_API_KEY=REPLACE_WITH_YOUR_E2B_API_KEY

# BrowserBase Integration (Optional)
BROWSERBASE_API_KEY=REPLACE_WITH_YOUR_BROWSERBASE_API_KEY
BROWSERBASE_PROJECT_ID=REPLACE_WITH_YOUR_BROWSERBASE_PROJECT_ID

# Sentry Error Tracking (Optional)
SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID
SENTRY_TOKEN=REPLACE_WITH_YOUR_SENTRY_TOKEN

# Package Registry Tokens (CI/CD Only)
NPM_ACCESS_TOKEN=npm_REPLACE_WITH_YOUR_NPM_TOKEN
PYPI_TOKEN=pypi_REPLACE_WITH_YOUR_PYPI_TOKEN

# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ 📋 DEPLOYMENT CHECKLIST                                                    ║
# ╚═══════════════════════════════════════════════════════════════════════════╝
#
# ✅ 1. Replace all REPLACE_WITH_* placeholders with actual values
# ✅ 2. Generate secure secrets for JWT_SECRET_KEY and NEXTAUTH_SECRET
# ✅ 3. Upload to Railway via Bulk Import (Settings → Environment Variables)
# ✅ 4. Connect PostgreSQL and Redis services in Railway (auto-sets URLs)
# ✅ 5. Verify deployment: curl https://your-app.railway.app/health
# ✅ 6. Test API: curl https://your-app.railway.app/api/v1/capabilities
#
# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║ ⚠️ SECURITY WARNINGS                                                       ║
# ╚═══════════════════════════════════════════════════════════════════════════╝
#
# ⛔ NEVER commit this file with real values to Git
# ⛔ Use Railway's environment variable management only
# ⛔ Rotate all API keys if exposed
# ⛔ Monitor API usage in provider dashboards
# ⛔ Set up usage alerts for unusual activity
#
# ═══════════════════════════════════════════════════════════════════════════
